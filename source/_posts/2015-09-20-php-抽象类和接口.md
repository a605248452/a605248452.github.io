title: php 抽象类和接口
author: Li Zhiyuan
tags:
  - PHP
  - 面向对象编程
categories:
  - PHP
date: 2015-09-20 14:42:21
---
## 前言

在学习PHP面向对象时，都会在抽象类与接口上迷惑，作用差不多为什么还那么容易混淆，何不留一去一？但是事实上两者的区别还是很大的，如果能够很好地运用PHP的两个方法，面向对象的程序设计将会更加合理、清晰高效。

<!-- more -->
## 抽象类

1. **抽象类无法被实例化**，它的作用是为所有继承自它的类定义（或部分实现）接口。
2. 使用 abstract 关键字定义抽象类。
3. 可以像在普通类中那样在抽象类中创建方法和属性，在大多数情况下，**一个抽象类至少包含一个抽象方法**，抽象方法也是通过 abstract 关键字声明的。**抽象方法只有方法声明，没有方法实现**。不能编写方法体。

   ```php
   abstract class ShopProductWriter
   {
       protected $product = [];
   
       /**
        * 抽象类中可以定义普通方法
        */
       public function addProduct($shopProduct)
       {
           $this->product = $shopProduct;
       }
   
       /**
        * 定义一个抽象方法，只有方法声明，没有方法实现
        */
       abstract public function write();
   }
   ```

4. **任何继承自抽象类的类都必须实现所有的抽象方法**，否则它自己就必须被定义为抽象类。子类不能仅仅实现抽象方法，还必须遵守方法签名。这意味着实现方法的访问控制不能比抽象方法更严格。实现方法还需要有与抽象方法相同数量的参数，以及相同的类型提示。
   ```php
   class XmlProductWriter extends ShopProductWriter
   {
       /**
        * 任何继承自抽象类的类都必须实现所有的抽象方法
        */
       public function write()
       {
           echo 'XmlProductWriter';
       }
   }
   ```

## 接口

1. 抽象类允许我们提供一些实现，但接口则是纯粹的模板。**接口只定义功能，不能有实现。可以有属性和方法的声明，但不能有方法体**。
2. 使用 interface 关键字声明接口。

    ```php
    interface Price
    {
        /**
         * 只有方法声明，没有方法实现
         */
        public function getPrice();
    }
    ```

3. **任何实现该接口的类都必须实现这个接口定义的所有方法**，否则这个类就只能被声明为抽象类。

4. 可以在类的声明中使用 implements 关键字让它实现接口。

    ```php
    class ShopProduct implements Price
    {
        protected $price;
    
        public function getPrice()
        {
            // TODO: Implement getPrice() method.
            return $this->price;
        }
    }
    ```

5. 一个实现类与它所实现的接口具有相同的类型。
6. 一个类可以在继承一个父类的同时实现多个接口，implements 关键字后面跟着多个接口的名字，它们之间由逗号分隔开来。